<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lost & Found Tracking System</title>

<style>
*{box-sizing:border-box}
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#f2f5f9}
header{background:#1d355e;color:#fff;padding:18px;text-align:center}
nav{display:flex;gap:10px;justify-content:center;padding:10px;background:#fff;position:sticky;top:0;z-index:5}
nav button{border:1px solid #1d355e;background:#fff;color:#1d355e;padding:8px 18px;border-radius:20px;font-weight:600}
nav button:hover{background:#1d355e;color:#fff}
.container{display:none;max-width:900px;margin:20px auto;background:#fff;padding:20px;border-radius:12px}
.container.active{display:block}
input,textarea,select{width:100%;padding:10px;margin-top:10px;border-radius:8px;border:1px solid #ccc}
button{margin-top:12px;padding:10px 16px;border:0;border-radius:8px;background:#1d355e;color:#fff}
button.danger{background:#c0392b}
.item{background:#f8fafc;padding:14px;border-radius:12px;margin-top:14px;display:flex;gap:14px}
.item img{width:110px;height:110px;object-fit:cover;border-radius:10px;background:#ddd}
.actions{display:flex;gap:10px;margin-top:10px}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:10}
.modal-box{background:#fff;padding:20px;border-radius:14px;width:320px}
@media(max-width:600px){
 .item{flex-direction:column}
 .item img{width:100%;height:160px}
}
</style>
</head>

<body>

<header>
 <h2>Lost & Found Tracking System</h2>
</header>

<nav>
 <button onclick="showPage('report')">Report</button>
 <button onclick="showPage('list')">Items</button>
 <button onclick="showPage('claimed')">Claimed</button>
 <button onclick="openGuide()">Guide</button>
</nav>

<div class="container active" id="report">
 <h3>Report Item</h3>
 <select id="type">
  <option>Lost</option>
  <option>Found</option>
 </select>
 <input id="itemName" placeholder="Item name">
 <textarea id="itemDesc" placeholder="Description"></textarea>
 <input type="file" id="itemImg" accept="image/*">
 <button onclick="submitItem()">Submit</button>
</div>

<div class="container" id="list">
 <h3>Item List</h3>
 <input id="search" placeholder="Search" onkeyup="searchItems()">
 <div id="items"></div>
</div>

<div class="container" id="claimed">
 <h3>Claimed Items</h3>
 <div id="claimedItems"></div>
</div>

<div class="modal" id="claimModal">
 <div class="modal-box">
  <h3>Claim Item</h3>
  <input id="claimName" placeholder="Your name">
  <button onclick="confirmClaim()">Confirm</button>
  <button onclick="closeClaim()">Cancel</button>
 </div>
</div>

<div class="modal" id="removeModal">
 <div class="modal-box">
  <h3>Remove Item</h3>
  <input id="removePass" type="password" placeholder="Password">
  <button onclick="confirmRemove()">Submit</button>
  <button onclick="closeRemove()">Cancel</button>
 </div>
</div>

<div class="modal" id="guideModal">
 <div class="modal-box">
  <h3>Guide</h3>
  <p style="font-size:14px;line-height:1.6">
   • Fill up item details<br>
   • Upload photo<br>
   • Item appears in list<br>
   • Claim with name<br><br>
   <b>Get item at:</b><br>
   Guidance Office<br>
   <b>Gov. Juanito Reyes Remulla Senior High School</b>
  </p>
  <button onclick="closeGuide()">Close</button>
 </div>
</div>

<script>
let items = JSON.parse(localStorage.getItem('items')) || [];
let claimed = JSON.parse(localStorage.getItem('claimed')) || [];
let currentIndex = null;
let removeIndex = null;

function showPage(id){
 document.querySelectorAll('.container').forEach(c=>c.classList.remove('active'));
 document.getElementById(id).classList.add('active');
 if(id==='list') renderItems();
 if(id==='claimed') renderClaimed();
}

function submitItem(){
 const type = document.getElementById('type').value;
 const name = itemName.value.trim();
 const desc = itemDesc.value.trim();
 const file = itemImg.files[0];

 if(!name || !desc){
  alert('Fill all fields');
  return;
 }

 if(file){
  const reader = new FileReader();
  reader.onload = e => saveItem(type,name,desc,e.target.result);
  reader.readAsDataURL(file);
 } else {
  saveItem(type,name,desc,'');
 }
}

function saveItem(type,name,desc,img){
 const date = new Date().toLocaleString();
 items.push({type,name,desc,img,date});
 localStorage.setItem('items',JSON.stringify(items));
 itemName.value=''; itemDesc.value=''; itemImg.value='';
 showPage('list');
}

function renderItems(){
 document.getElementById('items').innerHTML='';
 items.forEach((i,idx)=>{
  document.getElementById('items').innerHTML+=`
  <div class="item">
   <img src="${i.img}">
   <div>
    <b>${i.type}: ${i.name}</b>
    <p>${i.desc}</p>
    <small>${i.date}</small>
    <div class="actions">
     <button onclick="openClaim(${idx})">Claim</button>
     <button class="danger" onclick="openRemove(${idx})">Remove</button>
    </div>
   </div>
  </div>`;
 });
}

function searchItems(){
 const s = search.value.toLowerCase();
 document.getElementById('items').innerHTML='';
 items.forEach(i=>{
  if(i.name.toLowerCase().includes(s)||i.desc.toLowerCase().includes(s)){
   document.getElementById('items').innerHTML+=`
   <div class="item">
    <img src="${i.img}">
    <div><b>${i.name}</b><p>${i.desc}</p></div>
   </div>`;
  }
 });
}

function openClaim(i){currentIndex=i;claimModal.style.display='flex'}
function closeClaim(){claimModal.style.display='none'}

function confirmClaim(){
 const n = claimName.value.trim();
 if(!n){alert('Enter name');return}
 claimed.push({...items[currentIndex],claimant:n,claimedDate:new Date().toLocaleString()});
 items.splice(currentIndex,1);
 localStorage.setItem('items',JSON.stringify(items));
 localStorage.setItem('claimed',JSON.stringify(claimed));
 claimName.value='';
 closeClaim();
 renderItems();
}

function renderClaimed(){
 document.getElementById('claimedItems').innerHTML='';
 claimed.forEach((i,idx)=>{
  document.getElementById('claimedItems').innerHTML+=`
  <div class="item">
   <img src="${i.img}">
   <div>
    <b>${i.name}</b>
    <p>Claimed by: ${i.claimant}</p>
    <small>${i.claimedDate}</small>
    <button class="danger" onclick="openRemoveClaimed(${idx})">Remove</button>
   </div>
  </div>`;
 });
}

function openRemove(i){removeIndex=i;removeModal.dataset.mode='items';removeModal.style.display='flex'}
function openRemoveClaimed(i){removeIndex=i;removeModal.dataset.mode='claimed';removeModal.style.display='flex'}
function closeRemove(){removeModal.style.display='none';removePass.value=''}

function confirmRemove(){
 if(removePass.value!=='Abkial'){alert('Wrong password');return}
 if(removeModal.dataset.mode==='claimed'){
  claimed.splice(removeIndex,1);
  localStorage.setItem('claimed',JSON.stringify(claimed));
  renderClaimed();
 } else {
  items.splice(removeIndex,1);
  localStorage.setItem('items',JSON.stringify(items));
  renderItems();
 }
 closeRemove();
}

function openGuide(){guideModal.style.display='flex'}
function closeGuide(){guideModal.style.display='none'}
</script>

</body>
</html>